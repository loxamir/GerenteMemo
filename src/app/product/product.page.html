<ion-content class="product-content" style="--background: white;">
  <canvas id="canvas" height=200 width=200 style="display:none"></canvas>
  <form class="sample-form validations-form" [formGroup]="productForm" (ngSubmit)="onSubmit(productForm.value)" style="background: white;">
    <ion-row style="background: white;">
      <ion-col size="3">
        <img alt="Logo del producto" style="height: 74px;display: block;margin-left: auto;margin-right: auto;" [src]="'data:image/png;base64,'+productForm.value._attachments['avatar.png'].data" *ngIf="productForm.value._attachments && productForm.value._attachments['avatar.png']">
        <img alt="Logo del producto" style="height: 74px;display: block;margin-left: auto;margin-right: auto;" src="./assets/images/sem_foto.jpg" *ngIf="!(productForm.value._attachments && productForm.value._attachments['avatar.png'])">
      </ion-col>
      <ion-col>
        <ion-row>
          <ion-col>{{this.productForm.value.name}}</ion-col>
        </ion-row>
        <ion-row>
          <ion-col style="font-size: 12px;">{{this.productForm.value.description}}</ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <h1 *ngIf="productForm.value.sizes.length" style="background: white;font-style: italic;font-weight: bold;font-size: 15px;text-align:center;margin-top: 5px;margin-bottom: 0px;color: #3773e8;">
      {{'SELECT_SIZE'| translate}}
    </h1>
    <div class="scrolling-wrapper-flexbox" style="background: white;">
      <div class="card" *ngFor="let item of productForm.value.sizes">
        <div style="padding: 5px">
          <ion-card class="list-card" [class.selected]="item.name == productForm.value.size" (click)="selectSize(item)">
            <ion-row>
              <ion-col style="color: #ff1919;font-weight:bold;text-align:center;">
                {{item.name}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col style="color: black;font-weight:bold">
                Gs {{item.price|number:'1.0-0'}}
              </ion-col>
            </ion-row>
          </ion-card>
        </div>
      </div>
    </div>
    <ion-row style="background-color: white;">
      <ion-col size="3">
        <ion-button class="quantity-button" (click)="remItem()">-</ion-button>
      </ion-col>
      <ion-col size="6" style="text-align: center;font-size: 20px;margin-top: 8px;">
        {{this.productForm.value.quantity}}
      </ion-col>
      <ion-col size="3">
        <ion-button class="quantity-button" (click)="sumItem()">+</ion-button>
      </ion-col>
    </ion-row>
    <ion-item style="--background: white;">
      <h4 class="field-label-col">{{'SUBTOTAL' | translate}}</h4>
      <h4 class="field-value-col-2" style="color:blue">{{this.productForm.value.quantity*this.productForm.value.price|number}} G$</h4>
    </ion-item>
    <ion-item class="field-100">
      <ion-label position="floating">{{'OBSERVATION' | translate}}</ion-label>
      <ion-input type="text" formControlName="note" placeholder="Ejemplo: Sin cebolla"></ion-input>
    </ion-item>
    <h1 style="font-style: italic;font-weight: bold;font-size: 15px;text-align:center;margin-top: 5px;margin-bottom: 0px;color: #3773e8;" *ngIf="productForm.value.products.length" class="ion-no-padding">
      Quizas tambien quieras pedir
    </h1>
    <div class="scrolling-wrapper-flexbox" *ngIf="productForm.value.products.length">
      <div class="card" *ngFor="let item of productForm.value.products; let i = index;">
        <ion-row>
          <ion-card class="list-card" style="width: 180px;display: inline-block;border: 1px solid #8ebbf3;">
            <ion-row (click)="selectProduct(item)">
              <ion-col size="4">
                <img style="height: 50px;width: auto;border-radius: 5px;" [src]="'data:image/png;base64,'+item._attachments['avatar.png'].data" *ngIf="item._attachments && item._attachments['avatar.png']">
                <img style="height: 50px;width: auto;border-radius: 5px;" src="./assets/images/sem_foto.jpg" *ngIf="!(item._attachments && item._attachments['avatar.png'])">
              </ion-col>
              <ion-col class="ion-no-padding">
                <ion-row class="producto">
                  <ion-col class="ion-no-padding">
                    <h3 class="item-title" style="font-size: 13px;height: 30px;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 2;">{{ item.name }}</h3>
                  </ion-col>
                </ion-row>
                <ion-row class="ion-no-padding content-row one-line">
                  <ion-col class="ion-no-padding" style="text-align: right; margin-right: 0.5em;">
                    <h2 class="list-big-number" style="color: green;font-size: 13px;">{{item.price| number:'1.'+currency_precision}} G$</h2>
                  </ion-col>
                </ion-row>
                <ion-row class="ion-no-padding content-row one-line">
                  <ion-col class="ion-no-padding" style="text-align: right; margin-right: 0.5em;">
                    <ion-button style="height: 15px;width: 100px;">
                      {{'ADD'|translate}}
                    </ion-button>
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="item-content">
                <div style="height: 25px;font-size: 12px;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 2;">
                  {{item.description}}
                </div>
              </ion-col>
            </ion-row>
          </ion-card>
        </ion-row>
      </div>
    </div>
  </form>

  <ion-fab vertical="bottom" horizontal="start" slot="fixed">
    <ion-button (click)="exitPage()" color="danger" style="font-size: 12px;--ion-color-base: #FFEB3B !important;--ion-color-contrast: black !important;">
      {{ 'Seguir Comprando'| translate }}
    </ion-button>
  </ion-fab>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-button (click)="askProduct()" color="success" style="font-size: 12px;">
      {{'ADD_TO_ORDER'|translate}}
    </ion-button>
  </ion-fab>
  <div style="height: 100px;">
  </div>
</ion-content>
