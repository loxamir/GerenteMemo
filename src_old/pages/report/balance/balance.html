<ion-header>
  <ion-toolbar color="primary">
    <ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </ion-button>
    <ion-title>
      <ion-row>
        {{ 'BALANCE' | translate }}: {{balanceForm.value.code}}
      </ion-row>
    </ion-title>

    <ion-buttons slot="end" >
      <!-- <ion-button icon-only color="royal"
              (tap)="presentPopover($event)">
        <ion-icon name="more"></ion-icon>
      </ion-button> -->
    </ion-buttons>
  </ion-toolbar>


</ion-header>

<ion-content class="balance-content" style="background: white;">
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <form class="sample-form validations-form" [formGroup]="balanceForm" (ngSubmit)="onSubmit(balanceForm.value)">
    <ion-row justify-content-center>
      <ion-col width-10 class="sumary-label" no-padding>
          <h4 class="sumary-label">{{'Desde' | translate }}</h4>
      </ion-col>
      <ion-col width-37 class="item-content" no-padding>
          <!-- <h4 class="client-name">{{balanceForm.value.contact.name || '01/05/2018'}}</h4> -->
          <ion-datetime class="balance-date-start"
            displayFormat="DD/MM/YYYY"
            pickerFormat="DD/MM/YYYY"
            formControlName="dateStart">
            </ion-datetime>
      </ion-col>
      <ion-col width-15 class="sumary-label" no-padding>
          <h4 class="sumary-label">{{'Hasta' | translate }}</h4>
      </ion-col>
      <ion-col width-38  no-padding>
          <ion-datetime class="balance-date-end"
            displayFormat="DD/MM/YYYY"
            pickerFormat="DD/MM/YYYY"
            [max]="today.getFullYear()+5"
            formControlName="dateEnd">
            </ion-datetime>
      </ion-col>
    </ion-row>
    <div>
      <ion-list no-lines>
        <div *ngFor="let title of balance">
          <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
            <ion-col width-70 (click)=openTitle(title)>
              {{ title.code + ' - ' + title.name }}
            </ion-col>
            <ion-col width-30 style="text-align: right;color: #0a880a;">
              {{title.balance|number:'1.0-1'}}
            </ion-col>
          </ion-row>
          <div *ngFor="let category of title.categories">
            <ion-row>
              <ion-col width-60 (click)="openCategory(category)">
                {{category.code + ' - ' + category.name}}
              </ion-col>
              <ion-col width-40 style="text-align: right;color: #0a880a;">
                {{category.balance|number:'1.0-1'}}
              </ion-col>
            </ion-row>
            <!-- <div *ngFor="let account of category.accounts">
              <ion-row style="margin-left:50px">
                <ion-col width-60>
                  {{account.code + ' - ' + account.name}}
                </ion-col>
                <ion-col width-40 style="text-align: right;color: #0a880a;">
                  {{account.balance|number:'1.0-1'}}
                </ion-col>
              </ion-row>
            </div> -->
          </div>
        </div>

        <!-- <ion-row>
          <ion-col width-60>
            Ventas de Productos
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #0a880a;">
            {{sold|number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Venta de Servicios
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #0a880a;">
            {{service|number:'1.0-1'}}
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width-60>
            Devoluciones
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{return |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Impuesto sobre Ventas
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{saleTax |number:'1.0-1'}}
          </ion-col>
        </ion-row>

        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (=) Receta Liquida
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #0a880a;">
            {{sold+service+return+saleTax |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Costo de Mercaderia Vendida
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{cmv |number:'1.0-1'}}
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (=) Balanceado Bruto
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #0a880a;">
            {{sold+service+return+saleTax-cmv |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width-60>
            Gastos Administrativos
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{admin |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (=) Lucro Bruto
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #0a880a;">
            {{sold+service+return+saleTax-cmv+admin |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Gastos Financieros
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{incomeFinance |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Ingresos Finacieros
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{expenseFinance |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Depreciaciones
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{depre |number:'1.0-1'}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col width-60>
            Otros
          </ion-col>
          <ion-col width-40 style="text-align: right;color: #ed493c;">
            {{other |number:'1.0-1'}}
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (=) Lucro Liquido
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #0a880a;">
            {{sold+service+return+saleTax-cmv+admin+other-depre-expenseFinance+incomeFinance |number:'1.0-1'}}
          </ion-col>
        </ion-row> -->

        <!-- <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (-) Prolabore
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #ed493c;">
            -10.000
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col width-100>
          </ion-col>
        </ion-row>
        <ion-row style="background: #d9edf7; color: black;font-weight: bold;">
          <ion-col width-70>
            (=) Balanceado Liquido
          </ion-col>
          <ion-col width-30 style="text-align: right;color: #0a880a;">
            20.000
          </ion-col>
        </ion-row>-->
        <ion-row>
          <ion-col width-100 style="height: 60px">
          </ion-col>
        </ion-row>
      </ion-list>


    </div>
  </form>
  <ion-fab bottom left>
      <ion-fab-button (click)="share()" color="green">
          <ion-icon name="share">
          </ion-icon>
      </ion-button>
  </ion-fab>
  <!-- <ion-fab bottom center>
      <ion-fab-button (click)="recomputeValues()" color="green">
          <ion-icon name="arrow-round-forward">
          </ion-icon>
      </ion-button>
  </ion-fab> -->
  <ion-fab bottom right>
      <ion-fab-button (click)="printAndroid()" color="green">
          <ion-icon name="print">
          </ion-icon>
      </ion-button>
  </ion-fab>
</ion-content>
